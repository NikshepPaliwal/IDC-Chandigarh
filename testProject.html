<!DOCTYPE html>
<html>
  <head>
    <title>Army AR/VR Training â€“ A-Frame Demo</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">

    <!-- =====================
      VR TRAINING ENVIRONMENT
    ====================== -->
    <a-scene
      vr-mode-ui="enabled: true"
      renderer="antialias: true"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;">
      
      <!-- Floor -->
      <a-plane position="0 0 -4" rotation="-90 0 0" width="30" height="30" color="#3b3b3b"></a-plane>

      <!-- Lighting -->
      <a-entity light="type: ambient; color: #bbb"></a-entity>
      <a-entity light="type: directional; intensity: 0.8" position="1 1 0"></a-entity>

      <!-- Military Drone (3D Model) -->
      <a-entity gltf-model="url(https://cdn.aframe.io/test-models/models/drone/scene.gltf)"
                position="0 1.5 -3"
                rotation="0 45 0"
                scale="0.6 0.6 0.6"
                animation="property: rotation; to: 0 405 0; dur: 8000; loop: true; easing: linear">
      </a-entity>

      <!-- Target Marker 1 -->
      <a-entity id="target1" geometry="primitive: box; depth: 0.5; height: 0.5; width: 0.5"
                position="-2 1 -4"
                material="color: red"
                class="clickable">
      </a-entity>

      <!-- Popup Info Panel -->
      <a-entity id="infoPanel"
                visible="false"
                geometry="primitive: plane; height: 1; width: 2"
                material="color: black; opacity: 0.8"
                position="0 2 -2">
        <a-text value="Target Locked: Enemy Vehicle\nDistance: 320m\nStatus: Hostile"
                align="center"
                position="0 0 0.1"
                color="yellow"
                width="1.8">
        </a-text>
      </a-entity>

      <!-- Camera + Controls -->
      <a-entity camera
                look-controls
                wasd-controls="acceleration: 30">
      </a-entity>

      <!-- Click event script -->
      <script>
        AFRAME.registerComponent('show-info', {
          init: function () {
            this.el.addEventListener('click', function () {
              const panel = document.querySelector('#infoPanel');
              panel.setAttribute('visible', 'true');
            });
          }
        });
      </script>

      <a-entity id="target1" show-info></a-entity>

    </a-scene>
  </body>
</html>
