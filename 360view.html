<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Virtual Art Gallery</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-gesture-detector@4.0.5/dist/aframe-gesture-detector.min.js"></script>
</head>

<body>
  <script>
    AFRAME.registerComponent('rotation-listener', {
      schema: {},
      init: function () {
        this.rotation = this.el.getAttribute('rotation');
        this.startX = 0;
        this.el.sceneEl.addEventListener('dragstart', (e) => {
          this.startX = e.detail.position.x;
        });

        this.el.sceneEl.addEventListener('dragmove', (e) => {
          const deltaX = e.detail.position.x - this.startX;
          const newRotationY = this.rotation.y + deltaX * 100; // Adjust sensitivity
          this.el.setAttribute('rotation', {
            x: this.rotation.x,
            y: newRotationY,
            z: this.rotation.z
          });
        });

        this.el.sceneEl.addEventListener('dragend', (e) => {
          // Save the final rotation for next drag
          this.rotation = this.el.getAttribute('rotation');
        });
      }
    });
  </script>


  <a-scene background="color: #ECECEC">
    <a-assets>
      <a-asset-item id="cityModel" src="https://cdn.aframe.io/examples/ar/models/triceratops/scene.gltf"></a-asset-item>
    </a-assets>

    <!-- The entity that will detect gestures -->
    <a-entity id="model-container" gltf-model="#cityModel" scale="0.01 0.01 0.01" position="0 0 -3"
      animation="property:rotation; to:360 0 0 ; loop;true; dur:10000;" aframe-gesture-detector rotation-listener>
    </a-entity>
  </a-scene>
</body>

</html>